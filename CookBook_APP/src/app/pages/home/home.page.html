<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title>Home</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <ion-header collapse="condense">
    <ion-toolbar>
      <ion-title size="large">Home</ion-title>
    </ion-toolbar>
  </ion-header>

  @for (c of cardsList; track c; let i = $index) {
  <ion-card button="true" (click)="editRecipe(c)">
    <div class="image-content">
      <img alt="Imagen de receta" src="{{ c.image }}" />
    </div>
    <ion-card-header>
      <ion-card-title>{{ c.title }}</ion-card-title>
      <ion-card-subtitle>{{ c.subtitle }}</ion-card-subtitle>
    </ion-card-header>

    <ion-card-content>
      {{ getCardDescription(c) }}
      <ion-button size="small" fill="outline" color="danger" (click)="requestDeleteRecipe(c, $event)">
        Eliminar receta
      </ion-button>
    </ion-card-content>
  </ion-card>
  }

  <ion-fab slot="fixed" vertical="bottom" horizontal="end">
    <ion-fab-button aria-label="Agregar receta" (click)="openRecipeForm()">
      <ion-icon name="add"></ion-icon>
    </ion-fab-button>
  </ion-fab>
</ion-content>

<ion-modal [isOpen]="isRecipeModalOpen" (didDismiss)="closeRecipeForm()">
  <ng-template>
    <ion-header>
      <ion-toolbar>
        <ion-title>{{ editingRecipeId ? 'Editar receta' : 'Nueva receta' }}</ion-title>
      </ion-toolbar>
    </ion-header>

    <ion-content class="ion-padding">
      <ion-list>
        <ion-item>
          <ion-label position="stacked">Nombre *</ion-label>
          <ion-input [(ngModel)]="newRecipe.title" placeholder="Ej: Lasaña casera"></ion-input>
        </ion-item>

        <ion-item>
          <ion-label position="stacked">Subtítulo</ion-label>
          <ion-input [(ngModel)]="newRecipe.subtitle" placeholder="Breve descripción"></ion-input>
        </ion-item>

        <ion-item>
          <ion-label position="stacked">Descripción</ion-label>
          <ion-textarea [(ngModel)]="newRecipe.description" autoGrow="true"></ion-textarea>
        </ion-item>

        <ion-item>
          <ion-label position="stacked">Instrucciones</ion-label>
          <ion-textarea [(ngModel)]="newRecipe.instructions" autoGrow="true"></ion-textarea>
        </ion-item>

        <ion-item>
          <ion-label position="stacked">Tiempo (minutos)</ion-label>
          <ion-input type="number" [(ngModel)]="newRecipe.timeRequired"></ion-input>
        </ion-item>
      </ion-list>

      <ion-button expand="block" (click)="saveRecipe()">
        {{ editingRecipeId ? 'Guardar cambios' : 'Guardar receta' }}
      </ion-button>
      <ion-button expand="block" fill="outline" color="medium" (click)="closeRecipeForm()">Cancelar</ion-button>
    </ion-content>
  </ng-template>
</ion-modal>

<ion-alert
  [isOpen]="isDeleteAlertOpen"
  header="Confirmar eliminación"
  [message]="'¿Deseas eliminar la receta \'' + (recipeToDelete?.title ?? '') + '\'?'"
  [buttons]="deleteAlertButtons"
  (didDismiss)="cancelDeleteAlert()"
></ion-alert>